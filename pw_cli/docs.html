

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pw_cli &mdash; Pigweed</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="pw_containers" href="../pw_containers/docs.html" />
    <link rel="prev" title="pw_checksum" href="../pw_checksum/docs.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Pigweed
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pigweed.googlesource.com/pigweed/pigweed/+/refs/heads/master">Source Code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pigweed-review.googlesource.com">Code Reviews</a></li>
<li class="toctree-l1"><a class="reference external" href="https://groups.google.com/forum/#!forum/pigweed">Mailing List</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discord.gg/M9NSeTA">Chat Room</a></li>
<li class="toctree-l1"><a class="reference external" href="https://bugs.chromium.org/p/pigweed/issues/list">Issue Tracker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CODE_OF_CONDUCT.html">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/embedded_cpp_guide.html">Embedded C++ Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/style_guide.html">Code Style</a></li>
<li class="toctree-l1"><a class="reference internal" href="../targets.html">Targets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build_system.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/module_structure.html">Module Structure</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../module_guides.html">Module Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../docker/docs.html">docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_allocator/docs.html">pw_allocator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_arduino_build/docs.html">pw_arduino_build</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_assert/docs.html">pw_assert</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_assert_basic/docs.html">pw_assert_basic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_assert_log/docs.html">pw_assert_log</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_base64/docs.html">pw_base64</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_bloat/docs.html">pw_bloat</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_blob_store/docs.html">pw_blob_store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_boot_armv7m/docs.html">pw_boot_armv7m</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_build/docs.html">pw_build</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_bytes/docs.html">pw_bytes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_checksum/docs.html">pw_checksum</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">pw_cli</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#invoking-pw">Invoking  <code class="docutils literal notranslate"><span class="pre">pw</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#registering-pw-plugins">Registering <code class="docutils literal notranslate"><span class="pre">pw</span></code> plugins</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pw-plugins-file-format">PW_PLUGINS file format</a></li>
<li class="toctree-l4"><a class="reference internal" href="#defining-a-plugin-function">Defining a plugin function</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#branding-pigweed-s-tooling">Branding Pigweed’s tooling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#making-the-ascii-ansi-art">Making the ASCII / ANSI art</a></li>
<li class="toctree-l4"><a class="reference internal" href="#future-branding-improvements">Future branding improvements</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../pw_containers/docs.html">pw_containers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_cpu_exception/docs.html">pw_cpu_exception</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_cpu_exception_armv7m/docs.html">pw_cpu_exception_armv7m</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_docgen/docs.html">pw_docgen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_doctor/docs.html">pw_doctor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_env_setup/docs.html">pw_env_setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_fuzzer/docs.html">pw_fuzzer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_hdlc_lite/docs.html">pw_hdlc_lite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_hex_dump/docs.html">pw_hex_dump</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_kvs/docs.html">pw_kvs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_log/docs.html">pw_log</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_log_basic/docs.html">pw_log_basic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_log_null/docs.html">pw_log_null</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_log_rpc/docs.html">pw_log_rpc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_log_tokenized/docs.html">pw_log_tokenized</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_metric/docs.html">pw_metric</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_minimal_cpp_stdlib/docs.html">pw_minimal_cpp_stdlib</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_module/docs.html">pw_module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_polyfill/docs.html">pw_polyfill</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_preprocessor/docs.html">pw_preprocessor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_presubmit/docs.html">pw_presubmit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_protobuf/docs.html">pw_protobuf</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_protobuf_compiler/docs.html">pw_protobuf_compiler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_random/docs.html">pw_random</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_result/docs.html">pw_result</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_ring_buffer/docs.html">pw_ring_buffer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_rpc/docs.html">pw_rpc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_span/docs.html">pw_span</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_status/docs.html">pw_status</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_stream/docs.html">pw_stream</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_string/docs.html">pw_string</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_sys_io/docs.html">pw_sys_io</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_sys_io_arduino/docs.html">pw_sys_io_arduino</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_sys_io_baremetal_stm32f429/docs.html">pw_sys_io_baremetal_stm32f429</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_sys_io_stdio/docs.html">pw_sys_io_stdio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_target_runner/docs.html">pw_target_runner</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_tokenizer/docs.html">pw_tokenizer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_toolchain/docs.html">pw_toolchain</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_trace/docs.html">pw_trace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_trace_tokenized/docs.html">pw_trace_tokenized</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_unit_test/docs.html">pw_unit_test</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_varint/docs.html">pw_varint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_watch/docs.html">pw_watch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pw_web_ui/docs.html">pw_web_ui</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Pigweed</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../module_guides.html">Module Guides</a> &raquo;</li>
        
      <li>pw_cli</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pw-cli">
<span id="module-pw-cli"></span><h1>pw_cli<a class="headerlink" href="#pw-cli" title="Permalink to this headline">¶</a></h1>
<p>This directory contains the <code class="docutils literal notranslate"><span class="pre">pw</span></code> command line interface (CLI) that facilitates
working with Pigweed. The CLI module adds several subcommands prefixed with
<code class="docutils literal notranslate"><span class="pre">pw</span></code>, and provides a mechanism for other Pigweed modules to behave as
“plugins” and register themselves as <code class="docutils literal notranslate"><span class="pre">pw</span></code> commands as well. After activating
the Pigweed environment, these commands will be available for use.</p>
<p><code class="docutils literal notranslate"><span class="pre">pw</span></code> includes the following commands by default:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>doctor        Check that the environment is set up correctly for Pigweed.
format        Check and fix formatting for source files.
help          Display detailed information about pw commands.
logdemo       Show how logs look at various levels.
module-check  Check that a module matches Pigweed&#39;s module guidelines.
test          Run Pigweed unit tests built using GN.
watch         Watch files for changes and rebuild.
</pre></div>
</div>
<p>To see an up-to-date list of <code class="docutils literal notranslate"><span class="pre">pw</span></code> subcommands, run <code class="docutils literal notranslate"><span class="pre">pw</span> <span class="pre">--help</span></code>.</p>
<div class="section" id="invoking-pw">
<h2>Invoking  <code class="docutils literal notranslate"><span class="pre">pw</span></code><a class="headerlink" href="#invoking-pw" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">pw</span></code> subcommands are invoked by providing the command name. Arguments prior to
the command are interpreted by <code class="docutils literal notranslate"><span class="pre">pw</span></code> itself; all arguments after the command
name are interpreted by the command.</p>
<p>Here are some example invocations of <code class="docutils literal notranslate"><span class="pre">pw</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Run the doctor command
$ pw doctor

# Run format --fix with debug-level logs
$ pw --loglevel debug format --fix

# Display help for the pw command
$ pw -h watch

# Display help for the watch command
$ pw watch -h
</pre></div>
</div>
</div>
<div class="section" id="registering-pw-plugins">
<h2>Registering <code class="docutils literal notranslate"><span class="pre">pw</span></code> plugins<a class="headerlink" href="#registering-pw-plugins" title="Permalink to this headline">¶</a></h2>
<p>Projects can register their own Python scripts as <code class="docutils literal notranslate"><span class="pre">pw</span></code> commands. <code class="docutils literal notranslate"><span class="pre">pw</span></code>
plugins are registered by providing the command name, module, and function in a
<code class="docutils literal notranslate"><span class="pre">PW_PLUGINS</span></code> file. <code class="docutils literal notranslate"><span class="pre">PW_PLUGINS</span></code> files can add new commands or override
built-in commands. Since they are accessed by module name, plugins must be
defined in Python packages that are installed in the Pigweed virtual
environment.</p>
<p>Plugin registrations in a <code class="docutils literal notranslate"><span class="pre">PW_PLUGINS</span></code> file apply to the their directory and
all subdirectories, similarly to configuration files like <code class="docutils literal notranslate"><span class="pre">.clang-format</span></code>.
Registered plugins appear as commands in the <code class="docutils literal notranslate"><span class="pre">pw</span></code> tool when <code class="docutils literal notranslate"><span class="pre">pw</span></code> is run from
those directories.</p>
<p>Projects that wish to register commands might place a <code class="docutils literal notranslate"><span class="pre">PW_PLUGINS</span></code> file in the
root of their repo. Multiple <code class="docutils literal notranslate"><span class="pre">PW_PLUGINS</span></code> files may be applied, but the <code class="docutils literal notranslate"><span class="pre">pw</span></code>
tool gives precedence to a <code class="docutils literal notranslate"><span class="pre">PW_PLUGINS</span></code> file in the current working directory
or the nearest parent directory.</p>
<div class="section" id="pw-plugins-file-format">
<h3>PW_PLUGINS file format<a class="headerlink" href="#pw-plugins-file-format" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">PW_PLUGINS</span></code> contains one plugin entry per line in the following format:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Lines that start with a # are ignored.</span>
<span class="o">&lt;</span><span class="n">command</span> <span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">Python</span> <span class="n">module</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">function</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The following example registers three commands:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Register the presubmit script as pw presubmit</span>
<span class="n">presubmit</span> <span class="n">my_cool_project</span><span class="o">.</span><span class="n">tools</span> <span class="n">run_presubmit</span>

<span class="c1"># Override the pw test command with a custom version</span>
<span class="n">test</span> <span class="n">my_cool_project</span><span class="o">.</span><span class="n">testing</span> <span class="n">run_test</span>

<span class="c1"># Add a custom command</span>
<span class="n">flash</span> <span class="n">my_cool_project</span><span class="o">.</span><span class="n">flash</span> <span class="n">main</span>
</pre></div>
</div>
</div>
<div class="section" id="defining-a-plugin-function">
<h3>Defining a plugin function<a class="headerlink" href="#defining-a-plugin-function" title="Permalink to this headline">¶</a></h3>
<p>Any function without required arguments may be used as a plugin function. The
function should return an int, which the <code class="docutils literal notranslate"><span class="pre">pw</span></code> uses as the exit code. The
<code class="docutils literal notranslate"><span class="pre">pw</span></code> tool uses the function docstring as the help string for the command.</p>
<p>Typically, <code class="docutils literal notranslate"><span class="pre">pw</span></code> commands parse their arguments with the <code class="docutils literal notranslate"><span class="pre">argparse</span></code> module.
<code class="docutils literal notranslate"><span class="pre">pw</span></code> sets <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code> so it contains only the arguments for the plugin,
so plugins can behave the same whether they are executed independently or
through <code class="docutils literal notranslate"><span class="pre">pw</span></code>.</p>
<div class="section" id="example">
<h4>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<p>This example shows a function that is registered as a <code class="docutils literal notranslate"><span class="pre">pw</span></code> plugin.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># my_package/my_module.py</span>

<span class="k">def</span> <span class="nf">_do_something</span><span class="p">(</span><span class="n">device</span><span class="p">):</span>
    <span class="o">...</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Do something to a connected device.&quot;&quot;&quot;</span>

    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="vm">__doc__</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--device&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Set which device to target&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_do_something</span><span class="p">(</span><span class="o">**</span><span class="nb">vars</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()))</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</pre></div>
</div>
<p>This plugin is registered in a <code class="docutils literal notranslate"><span class="pre">PW_PLUGINS</span></code> file in the current working
directory or a parent of it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Register my_commmand</span>
<span class="n">my_command</span> <span class="n">my_package</span><span class="o">.</span><span class="n">my_module</span> <span class="n">main</span>
</pre></div>
</div>
<p>The function is now available through the <code class="docutils literal notranslate"><span class="pre">pw</span></code> command, and will be listed in
<code class="docutils literal notranslate"><span class="pre">pw</span></code>’s help. Arguments after the command name are passed to the plugin.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ pw

 ▒█████▄   █▓  ▄███▒  ▒█    ▒█ ░▓████▒ ░▓████▒ ▒▓████▄
  ▒█░  █░ ░█▒ ██▒ ▀█▒ ▒█░ █ ▒█  ▒█   ▀  ▒█   ▀  ▒█  ▀█▌
  ▒█▄▄▄█░ ░█▒ █▓░ ▄▄░ ▒█░ █ ▒█  ▒███    ▒███    ░█   █▌
  ▒█▀     ░█░ ▓█   █▓ ░█░ █ ▒█  ▒█   ▄  ▒█   ▄  ░█  ▄█▌
  ▒█      ░█░ ░▓███▀   ▒█▓▀▓█░ ░▓████▒ ░▓████▒ ▒▓████▀

usage: pw [-h] [-C DIRECTORY] [-l LOGLEVEL] [--no-banner] [command] ...

The Pigweed command line interface (CLI).

...

supported commands:
  doctor        Check that the environment is set up correctly for Pigweed.
  format        Check and fix formatting for source files.
  help          Display detailed information about pw commands.
  ...
  my_command    Do something to a connected device.

$ pw my_command -h

 ▒█████▄   █▓  ▄███▒  ▒█    ▒█ ░▓████▒ ░▓████▒ ▒▓████▄
  ▒█░  █░ ░█▒ ██▒ ▀█▒ ▒█░ █ ▒█  ▒█   ▀  ▒█   ▀  ▒█  ▀█▌
  ▒█▄▄▄█░ ░█▒ █▓░ ▄▄░ ▒█░ █ ▒█  ▒███    ▒███    ░█   █▌
  ▒█▀     ░█░ ▓█   █▓ ░█░ █ ▒█  ▒█   ▄  ▒█   ▄  ░█  ▄█▌
  ▒█      ░█░ ░▓███▀   ▒█▓▀▓█░ ░▓████▒ ░▓████▒ ▒▓████▀

usage: pw my_command [-h] [--device DEVICE]

Do something to a connected device.

optional arguments:
  -h, --help       show this help message and exit
  --device DEVICE  Set which device to target
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="branding-pigweed-s-tooling">
<h2>Branding Pigweed’s tooling<a class="headerlink" href="#branding-pigweed-s-tooling" title="Permalink to this headline">¶</a></h2>
<p>An important part of starting a new project is picking a name, and in the case
of Pigweed, designing a banner for the project. Pigweed supports configuring
the banners by setting environment variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PW_BRANDING_BANNER</span></code> - Absolute path to a filename containing a banner to
display when running the <code class="docutils literal notranslate"><span class="pre">pw</span></code> commands. See the example below.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PW_BRANDING_BANNER_COLOR</span></code> - Color of the banner. Possible values include:
<code class="docutils literal notranslate"><span class="pre">red</span></code>, <code class="docutils literal notranslate"><span class="pre">bold_red</span></code>, <code class="docutils literal notranslate"><span class="pre">yellow</span></code>, <code class="docutils literal notranslate"><span class="pre">bold_yellow</span></code>, <code class="docutils literal notranslate"><span class="pre">green</span></code>,
<code class="docutils literal notranslate"><span class="pre">bold_green</span></code>, <code class="docutils literal notranslate"><span class="pre">blue</span></code>, <code class="docutils literal notranslate"><span class="pre">cyan</span></code>, <code class="docutils literal notranslate"><span class="pre">magenta</span></code>, <code class="docutils literal notranslate"><span class="pre">bold_white</span></code>,
<code class="docutils literal notranslate"><span class="pre">black_on_white</span></code>. See <code class="docutils literal notranslate"><span class="pre">pw_cli.colors</span></code> for details.</p></li>
</ul>
<p>The below example shows how to manually change the branding at the command
line. However, these environment variables should be set in the project root’s
<code class="docutils literal notranslate"><span class="pre">bootstrap.sh</span></code> before delegating to Pigweed’s upstream <code class="docutils literal notranslate"><span class="pre">bootstrap.sh</span></code>.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ cat foo-banner.txt

 ▒██████  ░▓██▓░  ░▓██▓░
  ▒█░    ▒█   ▒█ ▒█   ▒█
  ▒█▄▄▄▄ ▒█ █ ▒█ ▒█ █ ▒█
  ▒█▀    ▒█   ▒█ ▒█   ▒█
  ▒█      ░▓██▓░  ░▓██▓░

$ export PW_BRANDING_BANNER=&quot;$(pwd)/foo-banner.txt&quot;
$ export PW_BRANDING_BANNER_COLOR=&quot;bold_red&quot;
$ pw logdemo

 ▒██████  ░▓██▓░  ░▓██▓░
  ▒█░    ▒█   ▒█ ▒█   ▒█
  ▒█▄▄▄▄ ▒█ █ ▒█ ▒█ █ ▒█
  ▒█▀    ▒█   ▒█ ▒█   ▒█
  ▒█      ░▓██▓░  ░▓██▓░

20200610 12:03:44 CRT This is a critical message
20200610 12:03:44 ERR There was an error on our last operation
20200610 12:03:44 WRN Looks like something is amiss; consider investigating
20200610 12:03:44 INF The operation went as expected
20200610 12:03:44 OUT Standard output of subprocess
</pre></div>
</div>
<p>The branding is not purely visual; it serves to make it clear which project an
engineer is working with.</p>
<div class="section" id="making-the-ascii-ansi-art">
<h3>Making the ASCII / ANSI art<a class="headerlink" href="#making-the-ascii-ansi-art" title="Permalink to this headline">¶</a></h3>
<p>The most direct way to make the ASCII art is to create it with a text editor.
However, there are some tools to make the process faster and easier.</p>
<ul class="simple">
<li><p><a class="reference external" href="http://patorjk.com/software/taag/">Patorjk’s ASCII art generator</a> - A
great starting place, since you can copy and paste straight from the browser
into a file, and then point <code class="docutils literal notranslate"><span class="pre">PW_BRANDING_BANNER</span></code> at it.  Most of the fonts
use normal ASCII characters; and fonts with extended ASCII characters use the
Unicode versions of them (needed for modern terminals).</p></li>
<li><p><a class="reference external" href="http://andyherbert.github.io/ansiedit/public/index.html">Online ANSII Edit by Andy Herbert</a> - Browser based
editor that can export to mixed UTF-8 and ANSII color. It’s also <a class="reference external" href="https://github.com/andyherbert/ansiedit">open source</a>. What’s nice about this editor is
that you can create a multi-color banner, and save it with the <code class="docutils literal notranslate"><span class="pre">File</span></code> –&gt;
<code class="docutils literal notranslate"><span class="pre">Export</span> <span class="pre">as</span> <span class="pre">ANSi</span> <span class="pre">(UTF-8)</span></code> option, and use it directly as a Pigweed banner.
One caveat is that the editor uses UTF-8 box drawing characters, which don’t
work well with all terminals. However, the box drawing characters look so
slick on terminals that support them that we feel this is a worthwhile
tradeoff.</p></li>
</ul>
<p>There are other options, but these require additional work to put into Pigweed
since they only export in the traditional ANS or ICE formats. The old ANS
formats do not have a converter (contributions welcome!). Here are some of the
options as of mid-2020:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://vectorpoem.com/playscii/">Playscii</a> - Actively maintained.</p></li>
<li><p><a class="reference external" href="https://github.com/blocktronics/moebius">Moebius</a> - Actively maintained.</p></li>
<li><p><a class="reference external" href="http://syncdraw.bbsdev.net/">SyncDraw</a> - Actively maintained, in 2020, in
a CVS repository.</p></li>
<li><p><a class="reference external" href="http://picoe.ca/products/pablodraw/">PabloDraw</a> - Works on most desktop
machines thanks to being written in .NET. Not maintained, but works well. Has
an impresive brush system for organic style drawing.</p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/TheDraw">TheDraw</a> - One of the most popular
ANSI art editors back in the 90s. Requires DOSBox to run on modern machines,
but otherwise works. It has some of the most impressive capabilities,
including supporting full-color multi-character fonts.</p></li>
</ul>
</div>
<div class="section" id="future-branding-improvements">
<h3>Future branding improvements<a class="headerlink" href="#future-branding-improvements" title="Permalink to this headline">¶</a></h3>
<p>Branding the <code class="docutils literal notranslate"><span class="pre">pw</span></code> tool is a great start, but more changes are planned:</p>
<ul class="simple">
<li><p>Supporting branding the <code class="docutils literal notranslate"><span class="pre">bootstrap/activate</span></code> banner, which for technical
reasons is not the same code as the banner printing from the Python tooling.
These will use the same <code class="docutils literal notranslate"><span class="pre">PW_BRANDING_BANNER</span></code> and
<code class="docutils literal notranslate"><span class="pre">PW_BRANDING_BANNER_COLOR</span></code> environment variables.</p></li>
<li><p>Supporting renaming the <code class="docutils literal notranslate"><span class="pre">pw</span></code> command to something project specific, like
<code class="docutils literal notranslate"><span class="pre">foo</span></code> in this case.</p></li>
<li><p>Re-coloring the log headers from the <code class="docutils literal notranslate"><span class="pre">pw</span></code> tool.</p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../pw_containers/docs.html" class="btn btn-neutral float-right" title="pw_containers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../pw_checksum/docs.html" class="btn btn-neutral float-left" title="pw_checksum" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020 The Pigweed Authors

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>